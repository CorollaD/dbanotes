---
layout: default
title: 中间件调研
---

# 1.Orchestrator

https://github.com/openark/orchestrator

`orchestrator` is a MySQL high availability and replication management tool, runs as a service and provides command line access, HTTP API and Web interface. `orchestrator` supports:

#### Discovery

`orchestrator` actively crawls through your topologies and maps them. It reads basic MySQL info such as replication status and configuration.

It provides you with slick visualization of your topologies, including replication problems, even in the face of failures.

#### Refactoring

`orchestrator` understands replication rules. It knows about binlog file:position, GTID, Pseudo GTID, Binlog Servers.

Refactoring replication topologies can be a matter of drag & drop a replica under another master. Moving replicas around is safe: `orchestrator` will reject an illegal refactoring attempt.

Fine-grained control is achieved by various command line options.

#### Recovery

`orchestrator` uses a holistic approach to detect master and intermediate master failures. Based on information gained from the topology itself, it recognizes a variety of failure scenarios.

Configurable, it may choose to perform automated recovery (or allow the user to choose type of manual recovery). Intermediate master recovery achieved internally to `orchestrator`. Master failover supported by pre/post failure hooks.

Recovery process utilizes *orchestrator's* understanding of the topology and of its ability to perform refactoring. It is based on *state* as opposed to *configuration*: `orchestrator` picks the best recovery method by investigating/evaluating the topology at the time of recovery itself.

#### The interface

`orchestrator` supports:

- Command line interface (love your debug messages, take control of automated scripting)

- Web API (HTTP GET access)

- Web interface, a *slick* one.

  ## Additional perks

  - Highly available
  - Controlled master takeovers
  - Manual failovers
  - Failover auditing
  - Audited operations
  - Pseudo-GTID
  - Datacenter/physical location awareness
  - MySQL-Pool association
  - HTTP security/authentication methods
  - There is also an [orchestrator-mysql](https://groups.google.com/forum/#!forum/orchestrator-mysql) Google groups forum to discuss topics related to orchestrator
  - More...



# 2.Gaea

连接：https://dbaplus.cn/news-11-2645-1.html



![截屏2021-07-28 21.06.55](/Users/corollad/Desktop/截屏2021-07-28 21.06.55.png)

![image-20210728210622994](/Users/corollad/Library/Application Support/typora-user-images/image-20210728210622994.png)

架构：

gaea包含四个模块，分别是gaea-proxy、gaea-cc、gaea-agent、gaea-web。gaea-proxy为在线代理，负责承接sql流量，gaea-cc是中控模块，负责gaea-proxy的配置管理及一些后台任务，gaea-agent部署在mysql所在的机器上，负责实例创建、管理、回收等工作，gaea-web是gaea的一个管理界面，使gaea整体使用更加方便。

#### 基础功能

- 多集群
- 多租户
- SQL透明转发
- 慢SQL指纹
- 错误SQL指纹
- 注解路由
- 慢日志
- 读写分离，从库负载均衡
- 自定义SQL拦截与过滤
- 连接池
- 配置热加载
- IP/IP段白名单
- 全局序列号

#### 分库、分表功能

- 分库: 支持mycat分库方式
- 分表: 支持kingshard分表方式
- 聚合函数: 支持max、min、sum、count、group by、order by等
- join: 支持分片表和全局表的join、支持多个分片表但是路由规则相同的join

# 3 [radondb](https://github.com/radondb) 青云开源的中间件

![截屏2021-07-28 21.32.38](/Users/corollad/Desktop/截屏2021-07-28 21.32.38.png)

https://www.qingcloud.com/products/radondb/



​                                                        

# 4 proxysql + pxc（2-3 节点） 

2节点无法保证高可用（一个节点挂了就只能只读了） proxysql  web版本比较简单

## 5 Apache ShardingSphere ---数据库中间件套件 比较重

https://shardingsphere.apache.org/document/current/cn/overview/

# 6 Cetus 网易开源产品

![截屏2021-07-28 22.03.53](/Users/corollad/Desktop/截屏2021-07-28 22.03.53.png)

基于官方MySQL-Proxy的版本，5.7版本以上，与我们生产环境不太符合

# 7.kingshard 

https://github.com/flike/kingshard

kingshard是一个由Go开发高性能MySQL Proxy项目，kingshard在满足基本的读写分离的功能上，致力于简化MySQL分库分表操作；能够让DBA通过kingshard轻松平滑地实现MySQL数据库扩容。 **kingshard的性能是直连MySQL性能的80%以上**。线上使用kingshard，**请从[release页面](https://github.com/flike/kingshard/releases)获取最新版！！**

## 主要功能：

### 1. 基础功能

- 支持SQL读写分离。
- 支持透明的MySQL连接池，不必每次新建连接。
- 支持平滑上线DB或下线DB，前端应用无感知。
- 支持多个slave，slave之间通过权值进行负载均衡。
- 支持强制读主库。
- 支持主流语言（java,php,python,C/C++,Go)SDK的mysql的prepare特性。
- 支持到后端DB的最大连接数限制。
- 支持SQL日志及慢日志输出。
- 支持SQL黑名单机制。
- 支持客户端IP访问白名单机制，只有白名单中的IP才能访问kingshard（支持IP 段）。
- 支持字符集设置。
- 支持last_insert_id功能。
- 支持热加载配置文件，动态修改kingshard配置项（具体参考管理端命令）。
- 支持以Web API调用的方式管理kingshard。
- 支持多用户模式，不同用户之间的表是权限隔离的，互不感知。

### 2. sharding功能

- 支持按整数的hash和range分表方式。
- 支持按年、月、日维度的时间分表方式。
- 支持跨节点分表，子表可以分布在不同的节点。
- 支持跨节点的count,sum,max和min等聚合函数。
- 支持单个分表的join操作，即支持分表和另一张不分表的join操作。
- 支持跨节点的order by,group by,limit等操作。
- 支持将sql发送到特定的节点执行。
- 支持在单个节点上执行事务，不支持跨多节点的分布式事务。
- 支持非事务方式更新（insert,delete,update,replace）多个node上的子表。
